type User @model @auth(rules: [{allow: public}]) {
  id: ID!
  firstName: String!
  lastName: String!
  email: String!
  bio: String
  location: String
  avatar: String
  coverImage: String
  category: String
  regionBlock: String
  prefecture: String
  district: String
}

# タイムライン投稿
type Post @model @auth(rules: [{allow: public}]) {
  id: ID!
  content: String!
  imageUrl: String
  pdfUrl: String
  pdfName: String
  locationName: String
  locationAddress: String
  linkUrl: String
  linkTitle: String
  linkDescription: String
  linkImage: String
  likesCount: Int!
  commentsCount: Int!
  authorEmail: String
  tournamentId: ID @index(name: "byTournament", queryField: "postsByTournament")
  teamId: ID @index(name: "byTeam", queryField: "postsByTeam")
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

# コメント
type Comment @model @auth(rules: [{allow: public}]) {
  id: ID!
  postId: ID!
  authorEmail: String
  content: String!
  createdAt: AWSDateTime
}

# いいね（重複防止用）
type Like @model @auth(rules: [{allow: public}]) {
  id: ID!
  postId: ID! @index(name: "byPostAndUser", sortKeyFields: ["userEmail"], queryField: "likesByPostAndUser")
  userEmail: String!
}

# お気に入り（大会・チーム）
type Favorite @model @auth(rules: [{allow: public}]) {
  id: ID!
  userEmail: String! @index(name: "byUser", queryField: "favoritesByUser")
  tournamentId: ID @index(name: "byTournament", queryField: "favoritesByTournament")
  teamId: ID @index(name: "byTeam", queryField: "favoritesByTeam")
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

# 地域ブロック（北海道、東北、関東など）
type Region @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String! # 例: "関東"
  slug: String! # 例: "kanto" (URL用)
  displayOrder: Int! # 表示順序
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

# 都道府県
type Prefecture @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String! # 例: "東京都"
  slug: String! # 例: "tokyo" (URL用)
  regionId: ID! @index(name: "byRegion", queryField: "prefecturesByRegion")
  displayOrder: Int! # 表示順序
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

# 地区（東京都の各区、神奈川県の各市など）
type District @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String! # 例: "新宿区"
  prefectureId: ID! @index(name: "byPrefecture", queryField: "districtsByPrefecture")
  displayOrder: Int! # 表示順序
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}
